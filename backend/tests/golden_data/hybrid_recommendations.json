{
  "signal_fusion": {
    "description": "Hybrid signal fusion with multiple strategies",
    "input": {
      "collaborative_scores": {
        "res_1": 0.85,
        "res_2": 0.72,
        "res_3": 0.68
      },
      "content_scores": {
        "res_1": 0.65,
        "res_2": 0.88,
        "res_3": 0.71
      },
      "graph_scores": {
        "res_1": 0.78,
        "res_2": 0.55,
        "res_3": 0.82
      },
      "quality_scores": {
        "res_1": 0.90,
        "res_2": 0.75,
        "res_3": 0.85
      },
      "recency_scores": {
        "res_1": 0.60,
        "res_2": 0.80,
        "res_3": 0.70
      },
      "weights": {
        "collaborative": 0.35,
        "content": 0.30,
        "graph": 0.20,
        "quality": 0.10,
        "recency": 0.05
      }
    },
    "expected": {
      "hybrid_scores": {
        "res_1": 0.7675,
        "res_2": 0.7415,
        "res_3": 0.7365
      },
      "ranked_ids": ["res_1", "res_2", "res_3"],
      "tolerance": 0.002
    }
  },
  "mmr_diversity": {
    "description": "Maximal Marginal Relevance diversity optimization",
    "input": {
      "candidates": [
        {"id": "res_1", "score": 0.9, "embedding": [0.8, 0.2, 0.5]},
        {"id": "res_2", "score": 0.85, "embedding": [0.7, 0.3, 0.4]},
        {"id": "res_3", "score": 0.8, "embedding": [0.1, 0.9, 0.1]},
        {"id": "res_4", "score": 0.75, "embedding": [0.8, 0.1, 0.6]}
      ],
      "lambda": 0.5,
      "limit": 3
    },
    "expected": {
      "selected_ids": ["res_1", "res_3", "res_2"],
      "mmr_scores": {
        "res_1": 0.9,
        "res_3": 0.65,
        "res_2": 0.55
      },
      "diversity_achieved": true
    }
  },
  "novelty_boosting": {
    "description": "Novelty boosting for lesser-known resources",
    "input": {
      "candidates": [
        {"id": "res_1", "score": 0.8, "view_count": 100},
        {"id": "res_2", "score": 0.75, "view_count": 10},
        {"id": "res_3", "score": 0.7, "view_count": 5}
      ],
      "median_view_count": 50,
      "novelty_preference": 0.3,
      "boost_factor": 0.2
    },
    "expected": {
      "novelty_scores": {
        "res_1": 0.0,
        "res_2": 0.8,
        "res_3": 0.9
      },
      "boosted_scores": {
        "res_1": 0.8,
        "res_2": 0.87,
        "res_3": 0.826
      },
      "reranked_ids": ["res_2", "res_3", "res_1"]
    }
  },
  "quality_filtering": {
    "description": "Quality-based filtering of recommendations",
    "input": {
      "candidates": [
        {"id": "res_1", "score": 0.9, "quality": 0.85, "is_outlier": false},
        {"id": "res_2", "score": 0.85, "quality": 0.45, "is_outlier": false},
        {"id": "res_3", "score": 0.8, "quality": 0.75, "is_outlier": true}
      ],
      "min_quality": 0.6,
      "exclude_outliers": true
    },
    "expected": {
      "filtered_ids": ["res_1"],
      "excluded_count": 2,
      "exclusion_reasons": {
        "res_2": "below_quality_threshold",
        "res_3": "quality_outlier"
      }
    }
  },
  "cold_start_strategy": {
    "description": "Strategy selection for cold start users",
    "input": {
      "user_id": "new_user",
      "interaction_count": 3,
      "cold_start_threshold": 5,
      "requested_strategy": "collaborative"
    },
    "expected": {
      "is_cold_start": true,
      "actual_strategy": "hybrid",
      "strategies_used": ["content", "graph"],
      "collaborative_excluded": true
    }
  },
  "recommendation_pipeline": {
    "description": "Full recommendation generation pipeline",
    "input": {
      "user_id": "user_123",
      "limit": 5,
      "strategy": "hybrid",
      "diversity_preference": 0.6,
      "novelty_preference": 0.4,
      "min_quality": 0.5
    },
    "expected": {
      "stages": [
        "candidate_generation",
        "hybrid_scoring",
        "quality_filtering",
        "mmr_diversity",
        "novelty_boosting"
      ],
      "min_recommendations": 5,
      "max_recommendations": 5,
      "gini_coefficient_range": [0.0, 1.0],
      "metadata_fields": [
        "total",
        "strategy",
        "is_cold_start",
        "diversity_applied",
        "novelty_applied",
        "gini_coefficient"
      ]
    }
  }
}
